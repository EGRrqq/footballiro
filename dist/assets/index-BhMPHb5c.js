var e=Object.defineProperty,t=(t,s,i)=>((t,s,i)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[s]=i)(t,"symbol"!=typeof s?s+"":s,i);import{r as s}from"./phaser-UvlxNa5i.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var i=s();class r extends i.Scene{constructor(){super("Game"),t(this,"cursors"),t(this,"hero"),t(this,"direction","down"),t(this,"camera"),t(this,"trophy"),t(this,"interactText"),t(this,"victoryText"),t(this,"interactKey"),t(this,"isVictory",!1),t(this,"VELOCITY",10),t(this,"BOUNDS",{w:3072,h:2048}),t(this,"INTERACT_DISTANCE",150)}createWall(e,t,s,i){const r=this.matter.add.image(e,t,"wall",void 0,{isStatic:!0});return r.setAngle(s),r.scale=i,r}collectTrophy(){const e=this.add.image(this.trophy.x,this.trophy.y,"trophy").setDepth(1e3).setScale(1.5);this.victoryText.setPosition(this.cameras.main.centerX,this.cameras.main.centerY).setVisible(!0).setAlpha(0).setScale(.1),this.tweens.add({targets:e,y:e.y-100,alpha:0,scale:2,duration:500,ease:"Cubic.easeOut",onComplete:()=>{this.isVictory=!0,e.destroy(),this.add.rectangle(0,0,this.cameras.main.width,this.cameras.main.height,0,.5).setOrigin(0).setDepth(1900).setScrollFactor(0),this.tweens.add({targets:this.victoryText,alpha:1,scale:1.2,duration:800,ease:"Bounce.easeOut",onComplete:()=>{this.tweens.add({targets:this.victoryText,scale:1.4,yoyo:!0,repeat:-1,duration:1e3,ease:"Sine.easeInOut"})}})}}),this.trophy.destroy(),this.trophy=null,this.interactText.setVisible(!1)}handleTrophyInteraction(){this.trophy&&(Phaser.Math.Distance.Between(this.hero.x,this.hero.y,this.trophy.x,this.trophy.y)<this.INTERACT_DISTANCE?(this.interactText.setPosition(this.hero.x,this.hero.y-40),this.interactText.setVisible(!0),Phaser.Input.Keyboard.JustDown(this.interactKey)&&this.collectTrophy()):this.interactText.setVisible(!1))}handleMovement(){var e,t,s,i;if(this.isVictory)return;const r=new Phaser.Math.Vector2(0,0);(null==(e=this.cursors.left)?void 0:e.isDown)&&(r.x-=1),(null==(t=this.cursors.right)?void 0:t.isDown)&&(r.x+=1),(null==(s=this.cursors.up)?void 0:s.isDown)&&(r.y-=1),(null==(i=this.cursors.down)?void 0:i.isDown)&&(r.y+=1),r.length()>0?(r.normalize().scale(this.VELOCITY),this.hero.setVelocity(r.x,r.y),r.x<0?this.direction="left":r.x>0?this.direction="right":r.y<0?this.direction="up":r.y>0&&(this.direction="down"),this.hero.anims.play(this.direction,!0)):(this.hero.setVelocity(0,0),this.hero.anims.play(`turn_${this.direction[0]}`,!0))}preload(){this.load.setPath("assets"),this.load.image("wall","platform.png"),this.load.image("trophy","gold_trophy_96x96_2.png"),this.load.spritesheet("hero","character_base_48x48.png",{frameWidth:48,frameHeight:48})}create(){this.matter.world.setBounds(0,0,this.BOUNDS.w,this.BOUNDS.h),this.cursors=this.input.keyboard.createCursorKeys(),this.createWall(400,50,90,2),this.createWall(400,1150,90,2),this.createWall(400,2250,90,2),this.createWall(2600,50,90,2),this.createWall(2600,1150,90,2),this.createWall(2600,2250,90,2),this.createWall(800,25,0,2),this.createWall(1600,25,0,2),this.createWall(2200,25,0,2),this.createWall(800,2023,0,2),this.createWall(1600,2023,0,2),this.createWall(2200,2023,0,2),this.trophy=this.matter.add.image(1500,600,"trophy",void 0,{isStatic:!0}),this.interactText=this.add.text(0,0,"Press X",{fontSize:"bold 26px",color:"#FFFFFF",backgroundColor:"#000000CC",padding:{x:10,y:5}}).setDepth(1e3).setVisible(!1).setOrigin(.5,1),this.victoryText=this.add.text(0,0,"VICTORY",{fontSize:"bold 128px",fontFamily:"Arial",color:"#F9885B",stroke:"#000000",strokeThickness:6,shadow:{offsetX:2,offsetY:2,color:"#000000",blur:2,stroke:!0}}).setOrigin(.5).setDepth(2e3).setVisible(!1).setScrollFactor(0),this.interactKey=this.input.keyboard.addKey(Phaser.Input.Keyboard.KeyCodes.X),this.hero=this.matter.add.sprite(1500,200,"hero",void 0,{chamfer:{radius:12}}),this.hero.setFixedRotation(),this.camera=this.cameras.main,this.camera.startFollow(this.hero),this.camera.setZoom(1.75),this.camera.setBounds(0,0,this.BOUNDS.w,this.BOUNDS.h),this.camera.roundPixels=!0,this.camera.setDeadzone(25,25),this.camera.setLerp(.1,.1),[{key:"left",frames:{start:12,end:15}},{key:"right",frames:{start:8,end:11}},{key:"up",frames:{start:4,end:7}},{key:"down",frames:{start:0,end:3}},{key:"turn_l",frames:{frames:[12]}},{key:"turn_r",frames:{frames:[8]}},{key:"turn_u",frames:{frames:[4]}},{key:"turn_d",frames:{frames:[0]}}].forEach((e=>{this.anims.create({key:e.key,frames:this.anims.generateFrameNumbers("hero",e.frames),frameRate:10})}))}update(){this.handleMovement(),this.handleTrophyInteraction()}}const a={type:i.AUTO,width:2048,height:2048,parent:"game-container",backgroundColor:"#bfc",physics:{default:"matter",matter:{gravity:{x:0,y:0},debug:!1}},scale:{mode:i.Scale.EXPAND,autoCenter:i.Scale.CENTER_BOTH},scene:[r]};document.addEventListener("DOMContentLoaded",(()=>{new i.Game({...a,parent:"game-container"})}));
